// vite.config.ts
import yaml4 from "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/node_modules/@rollup/plugin-yaml/dist/es/index.js";
import { sveltekit } from "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/node_modules/@sveltejs/kit/src/exports/vite/index.js";

// src/tasks/fetch-github-metadata.ts
import dotenv from "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/node_modules/dotenv/lib/main.js";
import fs from "fs";
import yaml from "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/node_modules/js-yaml/dist/js-yaml.mjs";
import { marked } from "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/node_modules/marked/lib/marked.esm.js";
import { performance } from "perf_hooks";
var __vite_injected_original_import_meta_url = "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/src/tasks/fetch-github-metadata.ts";
function title_to_slug(title) {
  return title.toLowerCase().replaceAll(` `, `-`);
}
dotenv.config({ path: `../site/.env` });
async function fetch_github_metadata(options = {}) {
  const { action: action2 = `add-missing` } = options;
  const in_path = `../sites.yml`;
  const out_path = `../site/src/sites.yml`;
  const sites = yaml.load(fs.readFileSync(in_path));
  const old_sites = fs.existsSync(out_path) ? yaml.load(fs.readFileSync(out_path)) : [];
  const this_file = __vite_injected_original_import_meta_url.split(`/`).pop();
  console.log(`Running ${this_file}...`);
  const start = performance.now();
  const old_slugs = old_sites.map((site) => site.slug);
  const [seen_sites, skipped_sites, updated_sites] = [[], [], []];
  if (!process.env.GH_TOKEN) {
    console.error(`GH_TOKEN environment variable is not set.`);
    process.exit(1);
  }
  const headers = {
    authorization: `token ${process.env.GH_TOKEN}`
  };
  async function fetch_check(url) {
    const response = await fetch(url, { headers }).then((res) => res.json());
    if (response.message)
      throw new Error(response.message);
    return response;
  }
  function https_url(url) {
    if (!url)
      return null;
    if (url.startsWith(`http`))
      return url.replace(`http://`, `https://`);
    return `https://${url}`;
  }
  for (const site of sites) {
    const slug = title_to_slug(site.title);
    if (seen_sites.includes(slug))
      throw new Error(`Duplicate slug ${slug}`);
    else
      seen_sites.push(slug);
    site.slug = slug;
    if (site.repo && !site.tags.includes(`open source`)) {
      site.tags.push(`open source`);
      site.tags.sort((a, b) => a.localeCompare(b));
    }
    if (!site.repo || old_slugs.includes(slug) && action2 !== `update-existing`) {
      skipped_sites.push(slug);
      continue;
    }
    const repoHandle = site.repo.split(`github.com/`)[1];
    if (!repoHandle || repoHandle.split(`/`).length !== 2) {
      console.error(`bad repo handle ${repoHandle}`);
      skipped_sites.push(slug);
      continue;
    }
    try {
      const url = `https://api.github.com/repos/${repoHandle}`;
      const repo = await fetch_check(url);
      site.repo_stars = repo.stargazers_count;
    } catch (error) {
      console.error(`Error fetching stars for ${site.title}:`, error);
    }
    let contributors = await fetch_check(
      `https://api.github.com/repos/${repoHandle}/contributors`
    );
    contributors = contributors.filter((c) => c.contributions > 10 && c.type === `User`).sort((c1, c2) => c2.contributions - c1.contributions).slice(0, 5);
    contributors = await Promise.all(
      contributors.map(
        ({ url }) => fetch(url, { headers }).then((r) => r.json())
      )
    );
    site.contributors = contributors.map(
      ({ name, location, company, ...c }) => ({
        github: c.login,
        twitter: c.twitter_username,
        url: https_url(c.blog),
        avatar: c.avatar_url,
        name,
        location,
        company
      })
    );
    updated_sites.push(slug);
  }
  const new_sites = sites.map((site) => {
    const old_site = old_sites.find((old) => old.slug === site.slug) ?? {};
    for (const key of [`repo_stars`, `contributors`]) {
      if (site[key] === void 0)
        site[key] = old_site[key];
    }
    site.description = marked.parseInline(site.description);
    return site;
  });
  const wall_time = ((performance.now() - start) / 1e3).toFixed(2);
  const comment = `# auto-generated by ${this_file}

`;
  fs.writeFileSync(out_path, comment + yaml.dump(new_sites));
  console.log(
    `${this_file} took ${wall_time}s, updated ${updated_sites.length}, skipped ${skipped_sites.length}
`
  );
}

// src/tasks/screenshots.ts
import fs2 from "fs";
import yaml2 from "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/node_modules/js-yaml/dist/js-yaml.mjs";
import { performance as performance2 } from "perf_hooks";
import puppeteer from "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/node_modules/puppeteer/lib/esm/puppeteer/puppeteer.js";
import sharp from "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/node_modules/sharp/lib/index.js";
var __vite_injected_original_import_meta_url2 = "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/src/tasks/screenshots.ts";
async function make_screenshots(options = {}) {
  const { action: action2 = `add-missing` } = options;
  const start = performance2.now();
  const screenshot_dir = `../site/static/screenshots`;
  const sites = yaml2.load(fs2.readFileSync(`../site/src/sites.yml`)).sort((s1, s2) => s1.title.localeCompare(s2.title));
  const browser = await puppeteer.launch();
  const page = await browser.newPage();
  fs2.mkdirSync(screenshot_dir, { recursive: true });
  const arg = process.argv.find((arg2) => arg2.startsWith(`screenshots:`));
  if (action2 && ![`add-missing`, `update-existing`].includes(action2)) {
    throw new Error(
      `Correct usage: vite [dev] screenshots:[report|download|re-download], got ${arg}
`
    );
  }
  const msg = {
    "add-missing": `Adding screenshots for sites without them`,
    "update-existing": `Updating all existing screenshots`
  }[action2];
  console.log(msg);
  const [created, updated, skipped, existed] = [[], [], [], []];
  for (const [idx, site] of sites.entries()) {
    const { slug } = site;
    const img_path = `${screenshot_dir}/${slug}.avif`;
    const img_exists = fs2.existsSync(img_path);
    if (action2 != `update-existing` && img_exists) {
      existed.push(site.slug);
      continue;
    }
    console.log(`${idx + 1}/${sites.length}: ${slug}`);
    try {
      try {
        await page.goto(site.url, { timeout: 5e3, waitUntil: `networkidle2` });
      } catch (error) {
        if (error instanceof puppeteer.TimeoutError) {
          await page.goto(site.url, { timeout: 5e3, waitUntil: `load` });
        } else {
          throw error;
        }
      }
    } catch (error) {
      console.log(`skipping ${slug} due to ${error}`);
      skipped.push(site.slug);
    }
    await new Promise((r) => setTimeout(r, 2e3));
    await page.setViewport({ width: 1200, height: 900 });
    const hires = await page.screenshot();
    await page.setViewport({ width: 1200, height: 900, deviceScaleFactor: 0.5 });
    const lores = await page.screenshot();
    await sharp(hires).toFile(img_path);
    await sharp(lores).toFile(`${screenshot_dir}/${slug}.small.avif`);
    if (img_exists)
      updated.push(site.slug);
    else
      created.push(site.slug);
  }
  await browser.close();
  const wall_time = ((performance2.now() - start) / 1e3).toFixed(2);
  const this_file = __vite_injected_original_import_meta_url2.split(`/`).pop();
  if (created.length > 0 || updated.length > 0) {
    console.log(
      `${this_file} took ${wall_time}s, created ${created.length} new, ${updated.length} updated, ${skipped.length} skipped, ${existed.length} already had screenshots
`
    );
  } else {
    console.log(`No changes from ${this_file} in ${wall_time}s
`);
  }
  const existing_slugs = sites.map((site) => site.slug);
  for (const file of fs2.readdirSync(screenshot_dir)) {
    const slug = file.replace(`.small.avif`, ``).replace(`.avif`, ``);
    if (!existing_slugs.includes(slug)) {
      console.log(`deleting ${file}`);
      fs2.unlinkSync(`${screenshot_dir}/${file}`);
    }
  }
}

// src/tasks/update-readme.ts
import fs3 from "fs";
import yaml3 from "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/node_modules/js-yaml/dist/js-yaml.mjs";
var __vite_injected_original_import_meta_url3 = "file:///E:/Exercises/Svelte/copy/awesome-sveltekit/site/src/tasks/update-readme.ts";
function update_readme() {
  const readme_path = `../readme.md`;
  const sites_path = `src/sites.yml`;
  const readme = fs3.readFileSync(readme_path, `utf8`);
  const sites = yaml3.load(fs3.readFileSync(sites_path));
  const new_line = `
   `;
  const new_sites = sites.sort((site_1, site_2) => {
    return (site_2.repo_stars ?? 0) - (site_1.repo_stars ?? 0);
  }).map((site) => {
    const { title, repo, uses, description, url, site_src } = site;
    if ([title, uses, description, url].includes(void 0)) {
      throw new Error(`missing field(s) in site '${title}'`);
    }
    try {
      let code_link = ``;
      if (repo) {
        const repo_handle = repo.split(`github.com/`)[1];
        if (repo_handle.split(`/`).length !== 2) {
          throw `bad repo handle ${repo_handle}`;
        }
        const star_badge = `<img src="https://img.shields.io/github/stars/${repo_handle}?logo=github" alt="GitHub stars" valign="middle">`;
        code_link = `&ensp;${new_line}[[code](${site_src ?? repo})]&ensp;${new_line}<a href="${repo}/stargazers">${new_line}${star_badge}${new_line}</a>`;
      }
      let metadata = description;
      if ((uses == null ? void 0 : uses.length) > 0) {
        metadata += `<br>
${new_line}uses: [${uses.join(`], [`)}]`;
      }
      return `1. **[${title}](${url})**${code_link}
${new_line}${metadata}
`;
    } catch (err) {
      throw `${err} for site '${title}'`;
    }
  }).join(`
`);
  const uses_links = Object.entries(yaml3.load(fs3.readFileSync(`../tools.yml`))).map(([name, url]) => `[${name}]: ${url}`).join(`
`);
  const new_readme = readme.replace(
    /## Sites\n\n[\s\S]+\n\n## /,
    // match everything up to next heading
    `## Sites

${new_sites}
${uses_links}

## `
  );
  fs3.writeFileSync(readme_path, new_readme);
  const this_file = __vite_injected_original_import_meta_url3.split(`/`).pop();
  console.log(`${this_file} updated readme
`);
}

// src/tasks/index.ts
var action_types = [`add-missing`, `update-existing`];

// vite.config.ts
var _a;
var action = ((_a = process.env) == null ? void 0 : _a.ACTION) ?? `add-missing`;
if (!action_types.includes(action)) {
  const types_str = action_types.join(`|`);
  throw new Error(
    `Correct usage: ACTION=${types_str} vite dev, got ACTION=${action}
`
  );
}
update_readme();
if (!process.env.CI)
  fetch_github_metadata({ action });
setTimeout(() => make_screenshots({ action }), 1e3);
var vite_config_default = {
  plugins: [sveltekit(), yaml4()],
  server: {
    fs: { allow: [`../..`] },
    // needed to import from $root
    port: 3e3
  },
  preview: {
    port: 3e3
  }
};
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiLCAic3JjL3Rhc2tzL2ZldGNoLWdpdGh1Yi1tZXRhZGF0YS50cyIsICJzcmMvdGFza3Mvc2NyZWVuc2hvdHMudHMiLCAic3JjL3Rhc2tzL3VwZGF0ZS1yZWFkbWUudHMiLCAic3JjL3Rhc2tzL2luZGV4LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiRTpcXFxcRXhlcmNpc2VzXFxcXFN2ZWx0ZVxcXFxjb3B5XFxcXGF3ZXNvbWUtc3ZlbHRla2l0XFxcXHNpdGVcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkU6XFxcXEV4ZXJjaXNlc1xcXFxTdmVsdGVcXFxcY29weVxcXFxhd2Vzb21lLXN2ZWx0ZWtpdFxcXFxzaXRlXFxcXHZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9FOi9FeGVyY2lzZXMvU3ZlbHRlL2NvcHkvYXdlc29tZS1zdmVsdGVraXQvc2l0ZS92aXRlLmNvbmZpZy50c1wiO2ltcG9ydCB5YW1sIGZyb20gJ0Byb2xsdXAvcGx1Z2luLXlhbWwnXHJcbmltcG9ydCB7IHN2ZWx0ZWtpdCB9IGZyb20gJ0BzdmVsdGVqcy9raXQvdml0ZSdcclxuaW1wb3J0IHR5cGUgeyBVc2VyQ29uZmlnIH0gZnJvbSAndml0ZSdcclxuaW1wb3J0IHtcclxuICBhY3Rpb25fdHlwZXMsXHJcbiAgZmV0Y2hfZ2l0aHViX21ldGFkYXRhLFxyXG4gIG1ha2Vfc2NyZWVuc2hvdHMsXHJcbiAgdXBkYXRlX3JlYWRtZSxcclxuICB0eXBlIEFjdGlvbixcclxufSBmcm9tICcuL3NyYy90YXNrcydcclxuXHJcbmNvbnN0IGFjdGlvbiA9IChwcm9jZXNzLmVudj8uQUNUSU9OID8/IGBhZGQtbWlzc2luZ2ApIGFzIEFjdGlvblxyXG5pZiAoIWFjdGlvbl90eXBlcy5pbmNsdWRlcyhhY3Rpb24pKSB7XHJcbiAgY29uc3QgdHlwZXNfc3RyID0gYWN0aW9uX3R5cGVzLmpvaW4oYHxgKVxyXG4gIHRocm93IG5ldyBFcnJvcihcclxuICAgIGBDb3JyZWN0IHVzYWdlOiBBQ1RJT049JHt0eXBlc19zdHJ9IHZpdGUgZGV2LCBnb3QgQUNUSU9OPSR7YWN0aW9ufVxcbmAsXHJcbiAgKVxyXG59XHJcblxyXG51cGRhdGVfcmVhZG1lKClcclxuaWYgKCFwcm9jZXNzLmVudi5DSSkgZmV0Y2hfZ2l0aHViX21ldGFkYXRhKHsgYWN0aW9uIH0pXHJcbnNldFRpbWVvdXQoKCkgPT4gbWFrZV9zY3JlZW5zaG90cyh7IGFjdGlvbiB9KSwgMTAwMClcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBwbHVnaW5zOiBbc3ZlbHRla2l0KCksIHlhbWwoKV0sXHJcblxyXG4gIHNlcnZlcjoge1xyXG4gICAgZnM6IHsgYWxsb3c6IFtgLi4vLi5gXSB9LCAvLyBuZWVkZWQgdG8gaW1wb3J0IGZyb20gJHJvb3RcclxuICAgIHBvcnQ6IDMwMDAsXHJcbiAgfSxcclxuXHJcbiAgcHJldmlldzoge1xyXG4gICAgcG9ydDogMzAwMCxcclxuICB9LFxyXG59IHNhdGlzZmllcyBVc2VyQ29uZmlnXHJcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiRTpcXFxcRXhlcmNpc2VzXFxcXFN2ZWx0ZVxcXFxjb3B5XFxcXGF3ZXNvbWUtc3ZlbHRla2l0XFxcXHNpdGVcXFxcc3JjXFxcXHRhc2tzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJFOlxcXFxFeGVyY2lzZXNcXFxcU3ZlbHRlXFxcXGNvcHlcXFxcYXdlc29tZS1zdmVsdGVraXRcXFxcc2l0ZVxcXFxzcmNcXFxcdGFza3NcXFxcZmV0Y2gtZ2l0aHViLW1ldGFkYXRhLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9FOi9FeGVyY2lzZXMvU3ZlbHRlL2NvcHkvYXdlc29tZS1zdmVsdGVraXQvc2l0ZS9zcmMvdGFza3MvZmV0Y2gtZ2l0aHViLW1ldGFkYXRhLnRzXCI7LyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xyXG4vKiBUaGlzIGZpbGUgcGFyc2VzIHNpdGVzLnltbCwgZmV0Y2hlcyBHSCBtZXRhZGF0YSBsaWtlIGNvbnRyaWJ1dG9yc1xyXG5hbmQgc3RhcnMgZm9yIGVhY2ggc2l0ZSwgdGhlbiB3cml0ZXMgdGhlIHJlc3VsdHMgdG8gc2l0ZS9zcmMvc2l0ZXMueW1sLiAqL1xyXG5cclxuaW1wb3J0IHR5cGUgeyBTaXRlIH0gZnJvbSAnJGxpYidcclxuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnXHJcbmltcG9ydCBmcyBmcm9tICdmcydcclxuaW1wb3J0IHlhbWwgZnJvbSAnanMteWFtbCdcclxuaW1wb3J0IHsgbWFya2VkIH0gZnJvbSAnbWFya2VkJ1xyXG5pbXBvcnQgeyBwZXJmb3JtYW5jZSB9IGZyb20gJ3BlcmZfaG9va3MnXHJcbmltcG9ydCB0eXBlIHsgQWN0aW9uIH0gZnJvbSAnLidcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0aXRsZV90b19zbHVnKHRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiB0aXRsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoYCBgLCBgLWApXHJcbn1cclxuXHJcbmRvdGVudi5jb25maWcoeyBwYXRoOiBgLi4vc2l0ZS8uZW52YCB9KVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoX2dpdGh1Yl9tZXRhZGF0YShvcHRpb25zOiB7IGFjdGlvbj86IEFjdGlvbiB9ID0ge30pIHtcclxuICBjb25zdCB7IGFjdGlvbiA9IGBhZGQtbWlzc2luZ2AgfSA9IG9wdGlvbnNcclxuICBjb25zdCBpbl9wYXRoID0gYC4uL3NpdGVzLnltbGBcclxuICBjb25zdCBvdXRfcGF0aCA9IGAuLi9zaXRlL3NyYy9zaXRlcy55bWxgXHJcblxyXG4gIGNvbnN0IHNpdGVzID0geWFtbC5sb2FkKGZzLnJlYWRGaWxlU3luYyhpbl9wYXRoKSkgYXMgU2l0ZVtdXHJcblxyXG4gIGNvbnN0IG9sZF9zaXRlcyA9IGZzLmV4aXN0c1N5bmMob3V0X3BhdGgpXHJcbiAgICA/IHlhbWwubG9hZChmcy5yZWFkRmlsZVN5bmMob3V0X3BhdGgpKVxyXG4gICAgOiBbXVxyXG5cclxuICBjb25zdCB0aGlzX2ZpbGUgPSBpbXBvcnQubWV0YS51cmwuc3BsaXQoYC9gKS5wb3AoKVxyXG5cclxuICBjb25zb2xlLmxvZyhgUnVubmluZyAke3RoaXNfZmlsZX0uLi5gKVxyXG5cclxuICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpXHJcblxyXG4gIGNvbnN0IG9sZF9zbHVncyA9IG9sZF9zaXRlcy5tYXAoKHNpdGUpID0+IHNpdGUuc2x1ZylcclxuXHJcbiAgY29uc3QgW3NlZW5fc2l0ZXMsIHNraXBwZWRfc2l0ZXMsIHVwZGF0ZWRfc2l0ZXNdID0gW1tdLCBbXSwgW11dXHJcblxyXG4gIGlmICghcHJvY2Vzcy5lbnYuR0hfVE9LRU4pIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYEdIX1RPS0VOIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBzZXQuYClcclxuICAgIHByb2Nlc3MuZXhpdCgxKVxyXG4gIH1cclxuXHJcbiAgY29uc3QgaGVhZGVycyA9IHtcclxuICAgIGF1dGhvcml6YXRpb246IGB0b2tlbiAke3Byb2Nlc3MuZW52LkdIX1RPS0VOfWAsXHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBmZXRjaF9jaGVjayh1cmw6IHN0cmluZykge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHsgaGVhZGVycyB9KS50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcbiAgICBpZiAocmVzcG9uc2UubWVzc2FnZSkgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLm1lc3NhZ2UpXHJcbiAgICByZXR1cm4gcmVzcG9uc2VcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGh0dHBzX3VybCh1cmw6IHN0cmluZykge1xyXG4gICAgaWYgKCF1cmwpIHJldHVybiBudWxsXHJcbiAgICBpZiAodXJsLnN0YXJ0c1dpdGgoYGh0dHBgKSkgcmV0dXJuIHVybC5yZXBsYWNlKGBodHRwOi8vYCwgYGh0dHBzOi8vYClcclxuICAgIHJldHVybiBgaHR0cHM6Ly8ke3VybH1gXHJcbiAgfVxyXG5cclxuICAvLyBPbmx5IHVwZGF0ZSBzaXRlL3NyYy9zaXRlcy5qcyBpZiBhIG5ldyBzaXRlIHdhcyBhZGRlZCB0byBzaXRlcy55bWxcclxuICAvLyBvciByZXBvIHN0YXJzIHdlcmUgbGFzdCBmZXRjaGVkIG1vcmUgdGhhbiBhIG1vbnRoIGFnby5cclxuICBmb3IgKGNvbnN0IHNpdGUgb2Ygc2l0ZXMpIHtcclxuICAgIGNvbnN0IHNsdWcgPSB0aXRsZV90b19zbHVnKHNpdGUudGl0bGUpXHJcblxyXG4gICAgaWYgKHNlZW5fc2l0ZXMuaW5jbHVkZXMoc2x1ZykpIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIHNsdWcgJHtzbHVnfWApXHJcbiAgICBlbHNlIHNlZW5fc2l0ZXMucHVzaChzbHVnKVxyXG5cclxuICAgIHNpdGUuc2x1ZyA9IHNsdWdcclxuXHJcbiAgICAvLyBhZGQgb3Blbi1zb3VyY2UgdGFnIGZvciBhbGwgc2l0ZXMgd2l0aCByZXBvIGtleVxyXG4gICAgaWYgKHNpdGUucmVwbyAmJiAhc2l0ZS50YWdzLmluY2x1ZGVzKGBvcGVuIHNvdXJjZWApKSB7XHJcbiAgICAgIHNpdGUudGFncy5wdXNoKGBvcGVuIHNvdXJjZWApXHJcbiAgICAgIHNpdGUudGFncy5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpIC8vIHNvcnQgdGFncyBhbHBoYWJldGljYWxseSBpbiBwbGFjZVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHNraXAgc2l0ZSBpZiBpdCBkb2Vzbid0IGhhdmUgYSByZXBvIGtleSBvciBpZiBkYXRhIHdhcyBmZXRjaGVkIGZvciBpdCBiZWZvcmVcclxuICAgIC8vIGFuZCB1cGRhdGVfZXhpc3RpbmcgaXMgZmFsc2VcclxuICAgIGlmIChcclxuICAgICAgIXNpdGUucmVwbyB8fFxyXG4gICAgICAob2xkX3NsdWdzLmluY2x1ZGVzKHNsdWcpICYmIGFjdGlvbiAhPT0gYHVwZGF0ZS1leGlzdGluZ2ApXHJcbiAgICApIHtcclxuICAgICAgc2tpcHBlZF9zaXRlcy5wdXNoKHNsdWcpXHJcbiAgICAgIGNvbnRpbnVlXHJcbiAgICB9XHJcblxyXG4gICAgLy8gYWxzbyBza2lwIHNpdGUgaWYgcmVwbyBrZXkgY2Fubm90IGJlIHBhcnNlZCBpbnRvIGEgdXNlciBsb2dpbiBhbmQgYSByZXBvIG5hbWVcclxuICAgIGNvbnN0IHJlcG9IYW5kbGUgPSBzaXRlLnJlcG8uc3BsaXQoYGdpdGh1Yi5jb20vYClbMV1cclxuICAgIGlmICghcmVwb0hhbmRsZSB8fCByZXBvSGFuZGxlLnNwbGl0KGAvYCkubGVuZ3RoICE9PSAyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYGJhZCByZXBvIGhhbmRsZSAke3JlcG9IYW5kbGV9YClcclxuICAgICAgc2tpcHBlZF9zaXRlcy5wdXNoKHNsdWcpXHJcbiAgICAgIGNvbnRpbnVlXHJcbiAgICB9XHJcblxyXG4gICAgLy8gZmV0Y2ggc3RhcnNcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb0hhbmRsZX1gXHJcbiAgICAgIGNvbnN0IHJlcG8gPSBhd2FpdCBmZXRjaF9jaGVjayh1cmwpXHJcbiAgICAgIHNpdGUucmVwb19zdGFycyA9IHJlcG8uc3RhcmdhemVyc19jb3VudFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgc3RhcnMgZm9yICR7c2l0ZS50aXRsZX06YCwgZXJyb3IpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gZmV0Y2ggbW9zdCBhY3RpdmUgY29udHJpYnV0b3JzXHJcbiAgICBsZXQgY29udHJpYnV0b3JzID0gYXdhaXQgZmV0Y2hfY2hlY2soXHJcbiAgICAgIGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb0hhbmRsZX0vY29udHJpYnV0b3JzYCxcclxuICAgIClcclxuXHJcbiAgICAvLyBzaG93IGF0IG1vc3QgNSBjb250cmlidXRvcnMgYW5kIG9ubHkgdGhvc2Ugd2l0aCBtb3JlIHRoYW4gMTAgY29tbWl0c1xyXG4gICAgLy8gYW5kIG9mIHR5cGUgJ1VzZXInICh0byBmaWx0ZXIgb3V0IGJvdHMpIHNvcnRlZCBieSBudW1iZXIgb2YgY29udHJpYnV0aW9uc1xyXG4gICAgY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzXHJcbiAgICAgIC5maWx0ZXIoKGMpID0+IGMuY29udHJpYnV0aW9ucyA+IDEwICYmIGMudHlwZSA9PT0gYFVzZXJgKVxyXG4gICAgICAuc29ydCgoYzEsIGMyKSA9PiBjMi5jb250cmlidXRpb25zIC0gYzEuY29udHJpYnV0aW9ucylcclxuICAgICAgLnNsaWNlKDAsIDUpXHJcblxyXG4gICAgY29udHJpYnV0b3JzID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgIGNvbnRyaWJ1dG9ycy5tYXAoKHsgdXJsIH0pID0+XHJcbiAgICAgICAgZmV0Y2godXJsLCB7IGhlYWRlcnMgfSkudGhlbigocikgPT4gci5qc29uKCkpLFxyXG4gICAgICApLFxyXG4gICAgKVxyXG5cclxuICAgIHNpdGUuY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzLm1hcChcclxuICAgICAgKHsgbmFtZSwgbG9jYXRpb24sIGNvbXBhbnksIC4uLmMgfSkgPT4gKHtcclxuICAgICAgICBnaXRodWI6IGMubG9naW4sXHJcbiAgICAgICAgdHdpdHRlcjogYy50d2l0dGVyX3VzZXJuYW1lLFxyXG4gICAgICAgIHVybDogaHR0cHNfdXJsKGMuYmxvZyksXHJcbiAgICAgICAgYXZhdGFyOiBjLmF2YXRhcl91cmwsXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBsb2NhdGlvbixcclxuICAgICAgICBjb21wYW55LFxyXG4gICAgICB9KSxcclxuICAgIClcclxuXHJcbiAgICB1cGRhdGVkX3NpdGVzLnB1c2goc2x1ZylcclxuICB9XHJcblxyXG4gIGNvbnN0IG5ld19zaXRlcyA9IHNpdGVzLm1hcCgoc2l0ZSkgPT4ge1xyXG4gICAgY29uc3Qgb2xkX3NpdGUgPSBvbGRfc2l0ZXMuZmluZCgob2xkKSA9PiBvbGQuc2x1ZyA9PT0gc2l0ZS5zbHVnKSA/PyB7fVxyXG4gICAgLy8gcmV0YWluIGZldGNoZWQgR2l0SHViIGRhdGEgZnJvbSBvbGRfc2l0ZXMgaW4gY2FzZSB3ZSBkaWRuJ3QgcmVmZXRjaFxyXG4gICAgLy8gYnV0IG92ZXJ3cml0ZSB3aXRoIG5ldyBkYXRhIGlmIHdlIGRpZFxyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgW2ByZXBvX3N0YXJzYCwgYGNvbnRyaWJ1dG9yc2BdKSB7XHJcbiAgICAgIGlmIChzaXRlW2tleV0gPT09IHVuZGVmaW5lZCkgc2l0ZVtrZXldID0gb2xkX3NpdGVba2V5XVxyXG4gICAgfVxyXG5cclxuICAgIHNpdGUuZGVzY3JpcHRpb24gPSBtYXJrZWQucGFyc2VJbmxpbmUoc2l0ZS5kZXNjcmlwdGlvbilcclxuXHJcbiAgICByZXR1cm4gc2l0ZVxyXG4gIH0pXHJcblxyXG4gIGNvbnN0IHdhbGxfdGltZSA9ICgocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCkgLyAxMDAwKS50b0ZpeGVkKDIpXHJcblxyXG4gIGNvbnN0IGNvbW1lbnQgPSBgIyBhdXRvLWdlbmVyYXRlZCBieSAke3RoaXNfZmlsZX1cXG5cXG5gXHJcbiAgZnMud3JpdGVGaWxlU3luYyhvdXRfcGF0aCwgY29tbWVudCArIHlhbWwuZHVtcChuZXdfc2l0ZXMpKVxyXG5cclxuICBjb25zb2xlLmxvZyhcclxuICAgIGAke3RoaXNfZmlsZX0gdG9vayAke3dhbGxfdGltZX1zLCB1cGRhdGVkICR7dXBkYXRlZF9zaXRlcy5sZW5ndGh9LCBgICtcclxuICAgICAgYHNraXBwZWQgJHtza2lwcGVkX3NpdGVzLmxlbmd0aH1cXG5gLFxyXG4gIClcclxufVxyXG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkU6XFxcXEV4ZXJjaXNlc1xcXFxTdmVsdGVcXFxcY29weVxcXFxhd2Vzb21lLXN2ZWx0ZWtpdFxcXFxzaXRlXFxcXHNyY1xcXFx0YXNrc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRTpcXFxcRXhlcmNpc2VzXFxcXFN2ZWx0ZVxcXFxjb3B5XFxcXGF3ZXNvbWUtc3ZlbHRla2l0XFxcXHNpdGVcXFxcc3JjXFxcXHRhc2tzXFxcXHNjcmVlbnNob3RzLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9FOi9FeGVyY2lzZXMvU3ZlbHRlL2NvcHkvYXdlc29tZS1zdmVsdGVraXQvc2l0ZS9zcmMvdGFza3Mvc2NyZWVuc2hvdHMudHNcIjsvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXHJcbi8qIFRoaXMgZmlsZSBwYXJzZXMgc2l0ZXMueW1sLCBnZW5lcmF0ZXMgbG93K2hpLXJlcyBzY3JlZW5zaG90cyBmb3IgZWFjaCBzaXRlLFxyXG5zYXZlcyB0aGVtIGFzIFdlYlAgdG8gc2l0ZS9zdGF0aWMvc2NyZWVuc2hvdHMvIGFuZCBjb21wcmVzc2VzIHRoZW0uICovXHJcblxyXG5pbXBvcnQgdHlwZSB7IFNpdGUgfSBmcm9tICckbGliJ1xyXG5pbXBvcnQgZnMgZnJvbSAnZnMnXHJcbmltcG9ydCB5YW1sIGZyb20gJ2pzLXlhbWwnXHJcbmltcG9ydCB7IHBlcmZvcm1hbmNlIH0gZnJvbSAncGVyZl9ob29rcydcclxuaW1wb3J0IHB1cHBldGVlciBmcm9tICdwdXBwZXRlZXInXHJcbmltcG9ydCBzaGFycCBmcm9tICdzaGFycCdcclxuaW1wb3J0IHR5cGUgeyBBY3Rpb24gfSBmcm9tICcuJ1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1ha2Vfc2NyZWVuc2hvdHMob3B0aW9uczogeyBhY3Rpb24/OiBBY3Rpb24gfSA9IHt9KSB7XHJcbiAgY29uc3QgeyBhY3Rpb24gPSBgYWRkLW1pc3NpbmdgIH0gPSBvcHRpb25zXHJcbiAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKVxyXG4gIGNvbnN0IHNjcmVlbnNob3RfZGlyID0gYC4uL3NpdGUvc3RhdGljL3NjcmVlbnNob3RzYFxyXG5cclxuICBjb25zdCBzaXRlcyA9IHlhbWxcclxuICAgIC5sb2FkKGZzLnJlYWRGaWxlU3luYyhgLi4vc2l0ZS9zcmMvc2l0ZXMueW1sYCkpXHJcbiAgICAuc29ydCgoczEsIHMyKSA9PiBzMS50aXRsZS5sb2NhbGVDb21wYXJlKHMyLnRpdGxlKSkgYXMgU2l0ZVtdXHJcblxyXG4gIGNvbnN0IGJyb3dzZXIgPSBhd2FpdCBwdXBwZXRlZXIubGF1bmNoKClcclxuICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKClcclxuXHJcbiAgZnMubWtkaXJTeW5jKHNjcmVlbnNob3RfZGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxyXG5cclxuICBjb25zdCBhcmcgPSBwcm9jZXNzLmFyZ3YuZmluZCgoYXJnKSA9PiBhcmcuc3RhcnRzV2l0aChgc2NyZWVuc2hvdHM6YCkpXHJcbiAgaWYgKGFjdGlvbiAmJiAhW2BhZGQtbWlzc2luZ2AsIGB1cGRhdGUtZXhpc3RpbmdgXS5pbmNsdWRlcyhhY3Rpb24pKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgIGBDb3JyZWN0IHVzYWdlOiB2aXRlIFtkZXZdIHNjcmVlbnNob3RzOltyZXBvcnR8ZG93bmxvYWR8cmUtZG93bmxvYWRdLCBnb3QgJHthcmd9XFxuYCxcclxuICAgIClcclxuICB9XHJcblxyXG4gIGNvbnN0IG1zZyA9IHtcclxuICAgICdhZGQtbWlzc2luZyc6IGBBZGRpbmcgc2NyZWVuc2hvdHMgZm9yIHNpdGVzIHdpdGhvdXQgdGhlbWAsXHJcbiAgICAndXBkYXRlLWV4aXN0aW5nJzogYFVwZGF0aW5nIGFsbCBleGlzdGluZyBzY3JlZW5zaG90c2AsXHJcbiAgfVthY3Rpb25dXHJcbiAgY29uc29sZS5sb2cobXNnKVxyXG5cclxuICBjb25zdCBbY3JlYXRlZCwgdXBkYXRlZCwgc2tpcHBlZCwgZXhpc3RlZF0gPSBbW10sIFtdLCBbXSwgW11dXHJcblxyXG4gIGZvciAoY29uc3QgW2lkeCwgc2l0ZV0gb2Ygc2l0ZXMuZW50cmllcygpKSB7XHJcbiAgICBjb25zdCB7IHNsdWcgfSA9IHNpdGVcclxuXHJcbiAgICBjb25zdCBpbWdfcGF0aCA9IGAke3NjcmVlbnNob3RfZGlyfS8ke3NsdWd9LmF2aWZgXHJcbiAgICBjb25zdCBpbWdfZXhpc3RzID0gZnMuZXhpc3RzU3luYyhpbWdfcGF0aClcclxuXHJcbiAgICBpZiAoYWN0aW9uICE9IGB1cGRhdGUtZXhpc3RpbmdgICYmIGltZ19leGlzdHMpIHtcclxuICAgICAgZXhpc3RlZC5wdXNoKHNpdGUuc2x1ZylcclxuICAgICAgY29udGludWVcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhgJHtpZHggKyAxfS8ke3NpdGVzLmxlbmd0aH06ICR7c2x1Z31gKVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgcGFnZS5nb3RvKHNpdGUudXJsLCB7IHRpbWVvdXQ6IDUwMDAsIHdhaXRVbnRpbDogYG5ldHdvcmtpZGxlMmAgfSlcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBwdXBwZXRlZXIuVGltZW91dEVycm9yKSB7XHJcbiAgICAgICAgICAvLyByZXRyeSBwYWdlLmdvdG8oKSwgdGhpcyB0aW1lIHdhaXRpbmcgb25seSBmb3IgJ2xvYWQnIGV2ZW50XHJcbiAgICAgICAgICBhd2FpdCBwYWdlLmdvdG8oc2l0ZS51cmwsIHsgdGltZW91dDogNTAwMCwgd2FpdFVudGlsOiBgbG9hZGAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgZXJyb3IgLy8gcmV0aHJvdyBpZiBub3QgYSBUaW1lb3V0RXJyb3JcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBza2lwcGluZyAke3NsdWd9IGR1ZSB0byAke2Vycm9yfWApXHJcbiAgICAgIHNraXBwZWQucHVzaChzaXRlLnNsdWcpXHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgMjAwMCkpIC8vIHdhaXQgZm9yIHNpdGVzIHdpdGggb24tbG9hZCBhbmltYXRpb25zIHRvIHNldHRsZVxyXG4gICAgYXdhaXQgcGFnZS5zZXRWaWV3cG9ydCh7IHdpZHRoOiAxMjAwLCBoZWlnaHQ6IDkwMCB9KVxyXG4gICAgY29uc3QgaGlyZXMgPSBhd2FpdCBwYWdlLnNjcmVlbnNob3QoKVxyXG4gICAgYXdhaXQgcGFnZS5zZXRWaWV3cG9ydCh7IHdpZHRoOiAxMjAwLCBoZWlnaHQ6IDkwMCwgZGV2aWNlU2NhbGVGYWN0b3I6IDAuNSB9KVxyXG4gICAgY29uc3QgbG9yZXMgPSBhd2FpdCBwYWdlLnNjcmVlbnNob3QoKVxyXG4gICAgYXdhaXQgc2hhcnAoaGlyZXMpLnRvRmlsZShpbWdfcGF0aClcclxuICAgIGF3YWl0IHNoYXJwKGxvcmVzKS50b0ZpbGUoYCR7c2NyZWVuc2hvdF9kaXJ9LyR7c2x1Z30uc21hbGwuYXZpZmApXHJcblxyXG4gICAgaWYgKGltZ19leGlzdHMpIHVwZGF0ZWQucHVzaChzaXRlLnNsdWcpXHJcbiAgICBlbHNlIGNyZWF0ZWQucHVzaChzaXRlLnNsdWcpXHJcbiAgfVxyXG5cclxuICBhd2FpdCBicm93c2VyLmNsb3NlKClcclxuXHJcbiAgY29uc3Qgd2FsbF90aW1lID0gKChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0KSAvIDEwMDApLnRvRml4ZWQoMilcclxuXHJcbiAgY29uc3QgdGhpc19maWxlID0gaW1wb3J0Lm1ldGEudXJsLnNwbGl0KGAvYCkucG9wKClcclxuXHJcbiAgaWYgKGNyZWF0ZWQubGVuZ3RoID4gMCB8fCB1cGRhdGVkLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICBgJHt0aGlzX2ZpbGV9IHRvb2sgJHt3YWxsX3RpbWV9cywgY3JlYXRlZCAke2NyZWF0ZWQubGVuZ3RofSBuZXcsICR7dXBkYXRlZC5sZW5ndGh9IHVwZGF0ZWQsICR7c2tpcHBlZC5sZW5ndGh9IHNraXBwZWQsICR7ZXhpc3RlZC5sZW5ndGh9IGFscmVhZHkgaGFkIHNjcmVlbnNob3RzXFxuYCxcclxuICAgIClcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coYE5vIGNoYW5nZXMgZnJvbSAke3RoaXNfZmlsZX0gaW4gJHt3YWxsX3RpbWV9c1xcbmApXHJcbiAgfVxyXG5cclxuICAvLyBkZWxldGUgc2NyZWVuc2hvdHMgb2YgcmVtb3ZlZCBzaXRlXHJcbiAgY29uc3QgZXhpc3Rpbmdfc2x1Z3MgPSBzaXRlcy5tYXAoKHNpdGUpID0+IHNpdGUuc2x1ZylcclxuXHJcbiAgZm9yIChjb25zdCBmaWxlIG9mIGZzLnJlYWRkaXJTeW5jKHNjcmVlbnNob3RfZGlyKSkge1xyXG4gICAgY29uc3Qgc2x1ZyA9IGZpbGUucmVwbGFjZShgLnNtYWxsLmF2aWZgLCBgYCkucmVwbGFjZShgLmF2aWZgLCBgYClcclxuICAgIGlmICghZXhpc3Rpbmdfc2x1Z3MuaW5jbHVkZXMoc2x1ZykpIHtcclxuICAgICAgY29uc29sZS5sb2coYGRlbGV0aW5nICR7ZmlsZX1gKVxyXG5cclxuICAgICAgZnMudW5saW5rU3luYyhgJHtzY3JlZW5zaG90X2Rpcn0vJHtmaWxlfWApXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiRTpcXFxcRXhlcmNpc2VzXFxcXFN2ZWx0ZVxcXFxjb3B5XFxcXGF3ZXNvbWUtc3ZlbHRla2l0XFxcXHNpdGVcXFxcc3JjXFxcXHRhc2tzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJFOlxcXFxFeGVyY2lzZXNcXFxcU3ZlbHRlXFxcXGNvcHlcXFxcYXdlc29tZS1zdmVsdGVraXRcXFxcc2l0ZVxcXFxzcmNcXFxcdGFza3NcXFxcdXBkYXRlLXJlYWRtZS50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRTovRXhlcmNpc2VzL1N2ZWx0ZS9jb3B5L2F3ZXNvbWUtc3ZlbHRla2l0L3NpdGUvc3JjL3Rhc2tzL3VwZGF0ZS1yZWFkbWUudHNcIjsvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXHJcbi8qIFRoaXMgZmlsZSBwYXJzZXMgc2l0ZXMueW1sLCB0aGVuIHVwZGF0ZXMgdGhlIGxpc3Qgb2Ygc2l0ZXMgaW4gdGhlIHJlYWRtZS4gKi9cclxuXHJcbmltcG9ydCBmcyBmcm9tICdmcydcclxuaW1wb3J0IHlhbWwgZnJvbSAnanMteWFtbCdcclxuaW1wb3J0IHR5cGUgeyBTaXRlIH0gZnJvbSAnLi4vbGliJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZV9yZWFkbWUoKSB7XHJcbiAgY29uc3QgcmVhZG1lX3BhdGggPSBgLi4vcmVhZG1lLm1kYFxyXG4gIGNvbnN0IHNpdGVzX3BhdGggPSBgc3JjL3NpdGVzLnltbGBcclxuXHJcbiAgY29uc3QgcmVhZG1lID0gZnMucmVhZEZpbGVTeW5jKHJlYWRtZV9wYXRoLCBgdXRmOGApXHJcbiAgY29uc3Qgc2l0ZXMgPSB5YW1sLmxvYWQoZnMucmVhZEZpbGVTeW5jKHNpdGVzX3BhdGgpKSBhcyBTaXRlW11cclxuXHJcbiAgY29uc3QgbmV3X2xpbmUgPSBgXFxuICAgYFxyXG5cclxuICBjb25zdCBuZXdfc2l0ZXMgPSBzaXRlc1xyXG4gICAgLnNvcnQoKHNpdGVfMSwgc2l0ZV8yKSA9PiB7XHJcbiAgICAgIHJldHVybiAoc2l0ZV8yLnJlcG9fc3RhcnMgPz8gMCkgLSAoc2l0ZV8xLnJlcG9fc3RhcnMgPz8gMClcclxuICAgIH0pXHJcbiAgICAubWFwKChzaXRlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgdGl0bGUsIHJlcG8sIHVzZXMsIGRlc2NyaXB0aW9uLCB1cmwsIHNpdGVfc3JjIH0gPSBzaXRlXHJcblxyXG4gICAgICBpZiAoW3RpdGxlLCB1c2VzLCBkZXNjcmlwdGlvbiwgdXJsXS5pbmNsdWRlcyh1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBtaXNzaW5nIGZpZWxkKHMpIGluIHNpdGUgJyR7dGl0bGV9J2ApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IGNvZGVfbGluayA9IGBgXHJcbiAgICAgICAgaWYgKHJlcG8pIHtcclxuICAgICAgICAgIGNvbnN0IHJlcG9faGFuZGxlID0gcmVwby5zcGxpdChgZ2l0aHViLmNvbS9gKVsxXVxyXG4gICAgICAgICAgaWYgKHJlcG9faGFuZGxlLnNwbGl0KGAvYCkubGVuZ3RoICE9PSAyKSB7XHJcbiAgICAgICAgICAgIHRocm93IGBiYWQgcmVwbyBoYW5kbGUgJHtyZXBvX2hhbmRsZX1gXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCBzdGFyX2JhZGdlID0gYDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9naXRodWIvc3RhcnMvJHtyZXBvX2hhbmRsZX0/bG9nbz1naXRodWJcIiBhbHQ9XCJHaXRIdWIgc3RhcnNcIiB2YWxpZ249XCJtaWRkbGVcIj5gXHJcbiAgICAgICAgICBjb2RlX2xpbmsgPVxyXG4gICAgICAgICAgICBgJmVuc3A7JHtuZXdfbGluZX1bW2NvZGVdKCR7c2l0ZV9zcmMgPz8gcmVwb30pXSZlbnNwOyR7bmV3X2xpbmV9YCArXHJcbiAgICAgICAgICAgIGA8YSBocmVmPVwiJHtyZXBvfS9zdGFyZ2F6ZXJzXCI+JHtuZXdfbGluZX0ke3N0YXJfYmFkZ2V9JHtuZXdfbGluZX08L2E+YFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1ldGFkYXRhID0gZGVzY3JpcHRpb25cclxuICAgICAgICBpZiAodXNlcz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgbWV0YWRhdGEgKz0gYDxicj5cXG4ke25ld19saW5lfXVzZXM6IFske3VzZXMuam9pbihgXSwgW2ApfV1gXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYDEuICoqWyR7dGl0bGV9XSgke3VybH0pKioke2NvZGVfbGlua31cXG4ke25ld19saW5lfSR7bWV0YWRhdGF9XFxuYFxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICB0aHJvdyBgJHtlcnJ9IGZvciBzaXRlICcke3RpdGxlfSdgXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuam9pbihgXFxuYClcclxuXHJcbiAgY29uc3QgdXNlc19saW5rcyA9IE9iamVjdC5lbnRyaWVzKHlhbWwubG9hZChmcy5yZWFkRmlsZVN5bmMoYC4uL3Rvb2xzLnltbGApKSlcclxuICAgIC5tYXAoKFtuYW1lLCB1cmxdKSA9PiBgWyR7bmFtZX1dOiAke3VybH1gKVxyXG4gICAgLmpvaW4oYFxcbmApXHJcblxyXG4gIC8vIHJlcGxhY2Ugb2xkIHNpdGVzXHJcbiAgY29uc3QgbmV3X3JlYWRtZSA9IHJlYWRtZS5yZXBsYWNlKFxyXG4gICAgLyMjIFNpdGVzXFxuXFxuW1xcc1xcU10rXFxuXFxuIyMgLywgLy8gbWF0Y2ggZXZlcnl0aGluZyB1cCB0byBuZXh0IGhlYWRpbmdcclxuICAgIGAjIyBTaXRlc1xcblxcbiR7bmV3X3NpdGVzfVxcbiR7dXNlc19saW5rc31cXG5cXG4jIyBgLFxyXG4gIClcclxuXHJcbiAgZnMud3JpdGVGaWxlU3luYyhyZWFkbWVfcGF0aCwgbmV3X3JlYWRtZSlcclxuXHJcbiAgY29uc3QgdGhpc19maWxlID0gaW1wb3J0Lm1ldGEudXJsLnNwbGl0KGAvYCkucG9wKClcclxuICBjb25zb2xlLmxvZyhgJHt0aGlzX2ZpbGV9IHVwZGF0ZWQgcmVhZG1lXFxuYClcclxufVxyXG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkU6XFxcXEV4ZXJjaXNlc1xcXFxTdmVsdGVcXFxcY29weVxcXFxhd2Vzb21lLXN2ZWx0ZWtpdFxcXFxzaXRlXFxcXHNyY1xcXFx0YXNrc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRTpcXFxcRXhlcmNpc2VzXFxcXFN2ZWx0ZVxcXFxjb3B5XFxcXGF3ZXNvbWUtc3ZlbHRla2l0XFxcXHNpdGVcXFxcc3JjXFxcXHRhc2tzXFxcXGluZGV4LnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9FOi9FeGVyY2lzZXMvU3ZlbHRlL2NvcHkvYXdlc29tZS1zdmVsdGVraXQvc2l0ZS9zcmMvdGFza3MvaW5kZXgudHNcIjtleHBvcnQgKiBmcm9tICcuL2ZldGNoLWdpdGh1Yi1tZXRhZGF0YSdcclxuZXhwb3J0ICogZnJvbSAnLi9zY3JlZW5zaG90cydcclxuZXhwb3J0ICogZnJvbSAnLi91cGRhdGUtcmVhZG1lJ1xyXG5cclxuZXhwb3J0IGNvbnN0IGFjdGlvbl90eXBlcyA9IFtgYWRkLW1pc3NpbmdgLCBgdXBkYXRlLWV4aXN0aW5nYF0gYXMgY29uc3RcclxuZXhwb3J0IHR5cGUgQWN0aW9uID0gKHR5cGVvZiBhY3Rpb25fdHlwZXMpW251bWJlcl1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjtBQUEyVSxPQUFPQSxXQUFVO0FBQzVWLFNBQVMsaUJBQWlCOzs7QUNJMUIsT0FBTyxZQUFZO0FBQ25CLE9BQU8sUUFBUTtBQUNmLE9BQU8sVUFBVTtBQUNqQixTQUFTLGNBQWM7QUFDdkIsU0FBUyxtQkFBbUI7QUFUdU4sSUFBTSwyQ0FBMkM7QUFZN1IsU0FBUyxjQUFjLE9BQXVCO0FBQ25ELFNBQU8sTUFBTSxZQUFZLEVBQUUsV0FBVyxLQUFLLEdBQUc7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QUksSUFBSSxNQUFNLEdBQUcsRUFBRSxFQUN4QyxLQUFLO0FBQUEsQ0FBSTtBQUdaLFFBQU0sYUFBYSxPQUFPO0FBQUEsSUFDeEI7QUFBQTtBQUFBLElBQ0E7QUFBQTtBQUFBLEVBQWUsU0FBUztBQUFBLEVBQUssVUFBVTtBQUFBO0FBQUE7QUFBQSxFQUN6QztBQUVBLEVBQUFBLElBQUcsY0FBYyxhQUFhLFVBQVU7QUFFeEMsUUFBTSxZQUFZRCwwQ0FBZ0IsTUFBTSxHQUFHLEVBQUUsSUFBSTtBQUNqRCxVQUFRLElBQUksR0FBRyxTQUFTO0FBQUEsQ0FBbUI7QUFDN0M7OztBQzlETyxJQUFNLGVBQWUsQ0FBQyxlQUFlLGlCQUFpQjs7O0FKSjdEO0FBV0EsSUFBTSxXQUFVLGFBQVEsUUFBUixtQkFBYSxXQUFVO0FBQ3ZDLElBQUksQ0FBQyxhQUFhLFNBQVMsTUFBTSxHQUFHO0FBQ2xDLFFBQU0sWUFBWSxhQUFhLEtBQUssR0FBRztBQUN2QyxRQUFNLElBQUk7QUFBQSxJQUNSLHlCQUF5QixTQUFTLHlCQUF5QixNQUFNO0FBQUE7QUFBQSxFQUNuRTtBQUNGO0FBRUEsY0FBYztBQUNkLElBQUksQ0FBQyxRQUFRLElBQUk7QUFBSSx3QkFBc0IsRUFBRSxPQUFPLENBQUM7QUFDckQsV0FBVyxNQUFNLGlCQUFpQixFQUFFLE9BQU8sQ0FBQyxHQUFHLEdBQUk7QUFFbkQsSUFBTyxzQkFBUTtBQUFBLEVBQ2IsU0FBUyxDQUFDLFVBQVUsR0FBR0csTUFBSyxDQUFDO0FBQUEsRUFFN0IsUUFBUTtBQUFBLElBQ04sSUFBSSxFQUFFLE9BQU8sQ0FBQyxPQUFPLEVBQUU7QUFBQTtBQUFBLElBQ3ZCLE1BQU07QUFBQSxFQUNSO0FBQUEsRUFFQSxTQUFTO0FBQUEsSUFDUCxNQUFNO0FBQUEsRUFDUjtBQUNGOyIsCiAgIm5hbWVzIjogWyJ5YW1sIiwgImFjdGlvbiIsICJmcyIsICJ5YW1sIiwgInBlcmZvcm1hbmNlIiwgIl9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwiLCAiYWN0aW9uIiwgInBlcmZvcm1hbmNlIiwgInlhbWwiLCAiZnMiLCAiYXJnIiwgImZzIiwgInlhbWwiLCAiX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCIsICJmcyIsICJ5YW1sIiwgInlhbWwiXQp9Cg==
